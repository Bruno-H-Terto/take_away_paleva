<section class="row mt-3">
  <div class="col-8">
    <div>
      <div>
        <h3><%= item.name %></h3>
        <small>
          <%= Item.human_attribute_name(item.status) %> 
        </small>
      </div>
      <div class="btn-group">
        <%= button_to 'Alterar status', change_status_take_away_store_item_path(take_away_store, item), method: :patch, class: 'btn btn-warning' %>
        <%= link_to 'Editar', edit_take_away_store_item_path(take_away_store, item), class: 'btn btn-primary' %>
        <%= button_to 'Excluir', take_away_store_item_path(take_away_store, item), method: :delete, class: 'btn btn-danger', data: { confirm: 'Tem certeza que deseja excluir este item?' } %>
      </div>
    </div>
    <div class="container mt-3 column">
      <div class="row">
        <% if item.photo.attached? %>
          <%= image_tag item.photo, class: 'fixed-img item-img', alt: 'Card item image' %>
        <% else %>
          <%= image_tag 'default-item-img',  class: 'fixed-img', alt: 'No image item' %>
        <% end %>
      </div>
      <div class="row">
        <span><%= item.description %></span>
      </div>
      <div class="row">
        <% if item.calories.present? %>
          <span><%= item.calories %> Calorias</span>
        <% end %>
      </div>
    </div>
  </div>

  <div id="item_portions" class="col-4">
    <div>
      <h3>Adicionar porção para <%= item.name %></h3>
      <div>
        <%= render 'shared/errors', object: portion %>
        <%= form_with model: portion, url: take_away_store_item_portions_path(take_away_store, item), method: :post do |form| %>
          <div>
            <%= form.label :option_name %>
            <%= form.text_field :option_name, placeholder: 'Ex.: Pequena, Média...' %>
          </div>

          <div>
            <%= form.label :value %>
            <%= form.text_field :value %>
          </div>

          <div class="mt-3">
            <%= form.submit class: 'btn btn-success' %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="mt-4">
      <% if item.portions.any? { |portion| portion.persisted? } %>
        <div class="column">
          <% item.portions.select(&:persisted?).each do |portion| %>
            <%= link_to portion_path(portion) do %>
              <span class="row">
                <%= portion.menu_option_name %>
              </span>
            <% end %>
          <% end %>
        </div>
      <% else %>
        <p>Sem porções registradas</p>
      <% end %>
    </div>
  </div>
</section>